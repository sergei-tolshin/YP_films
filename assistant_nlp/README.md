
# Голосовой ассистент c NLP

Голосовой помощник интегрируется с сервисами поиска фильмов, UGC, рекомендательной системой, сервисом уведомлений и авторизации.

## Основные требования

1. Встроенный синтез и распознование речи для озвучивания текстовой информации. Поддержка русского и английского языков.
2. Поддерживаемые платформы: Яндекс.Диалоги (<https://dialogs.yandex.ru>) и др.
3. Безопасность (авторизация и аутентификация пользователей).
4. Сервис должен иметь API для взаимодействия.
5. Время ожидания ответа от навыка — 3 секунды.

## Общее описание сервиса

1. Устройство пользователя с усановленным приложением Яндекса, Яндекс.Браузер или Яндекс.Станция принимает голосовые команды от
пользователя и перенаправляет их на платформу Яндекс.Диалоги, которая состоит из систем синтеза и распознования речи.
2. Сервис голосового помощника (навыка Алисы) - это приложение, которое обрабатывает определенный сценарий поведения команды, переданной из
платформы Яндекс.Диалоги по протоколу HTTPS. Навык содержит весь алгоритм общения голосового помощника с пользователем.
3. При необходимости озвучить голосовое сообщение синтезированным голосом, приложение навыка сообщает платформе Яндекс.Диалоги о необходимости отправить
текст для синтеза, платформа из полученного текста возвращает поток речи на устройство для проигрывания пользователю.

<img src="https://github.com/grand-roman/YP_films_/blob/main/architecture/assistant/img/schema.jpg" width="960" />

---

### Технологии

* #### Фреймворки

  * FastAPI

* #### NLP (платформа для понимания естественного языка)

  * Dialogflow (<https://cloud.google.com/dialogflow>)

* #### Прокси сервер

  * Nginx

* #### Обмен данными между сервисами

  * REST API
  * gRPC

## Пример диалога

Ассистент может различать тип персоны (актер, режиссер, сценарист).
Ассистент запоминает последний фильм или персону, до момента пока не будет сказано новое название фильма или имя персоны.

А - ассистент
П - пользователь

* А: Привет, я помощник в мире кино! Могу рассказать вам сюжет фильма, а также назвать актеров, сценаристов и режиссера. Про какой фильм вам рассказать?
* П: Расскажи про фильм <название фильма>.
* А: <сюжет фильма>... Вот такой сюжет у фильма. А еще могу назвать всех актеров, скажите, например, "Актеры в фильме".
* П: Кто снимался в фильме?
* А: В фильме снимались: <имя актера 1>, <имя актера 2>, ... . А еще могу назвать другие фильмы с этими актёрами, скажите, например, "Фильмы с участием <имя актера 2>".
* П: В каких фильмах снимался <имя актера 1>?
* А: Нашла лучшие фильмы <имя актера 1>: <фильм 1>, <фильм 2>, ... .
* П: Найди фильм <название фильма>.
* А: <название фильма> интересный фильм и сюжет захватывающий! Могу рассказать вам его!
* П: Скажи какой рйтинг у фильма.
* А: Рейтинг фильма <рейтинг> по версии IMDb. А еще могу рассказать вам сюжет, скажите, например, "Сюжет фильма".
* П: Кто снял этот фильм?
* А: Режиссер фильма <имя режиссера>. А еще знаю другие фильмы снятые этим режиссером, скажите, например, "Какие еще фильмы снял <имя режиссера>".
* П: Какие фильмы снял <имя режиссера>?
* А: Нашла лучшие фильмы <имя режиссера>: <фильм 1>, <фильм 2>, ... .
* П: Сколько фильмов он снял?
* А: <имя режиссера> снял <число> фильмов.
и т.д.
...

---

### Возможные варианты фраз для взаимодействия с помощником

Активация навыка: "Запусти навык мой Киноскоп"

Голосовые команды MVP:

* Без авторизации пользователя:
  * "Найди/поищи фильма/мультфильм/сериал Х?"
  * "Кто автор/режиссер/сценарист/продюссер фильма Х?"
  * "Сколько фильмов снял/выпусти Y?"
  * "Кто снялся/снимался в фильме Х?"
  * "В каких фильмах снялся/снимался актер Z?"
  * "Какой рейтинг у фильма X?"
  * "Какой жанр у фильма X?"
  * "Расскажи о фильме X?"

Голосовые команды на будущее:

* Без авторизации пользователя:
  * "Порекомендуй/предложи фильм?"
  * "Порекомендуй/предложи фильм в жанре?"

* Требующие авторизации:
  * "Добавь фильм Х в избранное."
  * "Отправь моим друзьям ссылку на фильм Х?"
  * "Включи/Открой/Запусти последний недосмотренный фильм."
  * "Порекомендуй/предложи фильм?"
  * "Порекомендуй/предложи фильм в жанре?"
  * "Порекомендуй комедию/мелодраму/детектив/и т.д."
